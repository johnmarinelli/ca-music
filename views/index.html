<!doctype HTML>
<html>
<head>
  <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="css/style.css" rel="stylesheet" type="text/css">
</head>

<body>
  <div class="container">
    <h1>Musical Automata</h1>
    <p>A cellular-automata sequencer.</p>
    <div class="canvas-container">
      <canvas id="canvas" width="1000" height="240">
      </canvas>
    </div>

    <div class="row">
      <div class="rules-container">
        <p>Placeholder</p>
      </div>
      <div class="controls">
        <button>Start</button>
        <button>Save</button>
        <label for="tempo">Tempo: <input type="number" min="60" max="120" name="tempo"></input></label>
      </div>
    </div>
  </div>
</body>

<script src="js/Cell.js"></script>
<script src="js/HashTable.js"></script>
<script src="js/Graph.js"></script>
<script src="js/1dWorld.js"></script>
<script>
var rows = 24,
    cols = 100,
    canvas = document.getElementById('canvas'),
    canvasWidth = canvas.width,
    canvasHeight = canvas.height,
    graph = new Graph(cols, rows, canvasWidth, canvasHeight),
    world = new World(graph);

(function(world) {
  var colInc = Math.round(canvasWidth / cols),
    rowInc = Math.round(canvasHeight / rows),
    context = canvas.getContext('2d');

  (function seedWorld() {
    var seedGen = [];
    for (var i = 0; i < canvasHeight; i += rowInc) 
      seedGen.push(new Cell(0, i, false));

    seedGen[5].mAlive = true;

    world.seed(seedGen);
  }());
  
  var drawGrid = function() {
    context.beginPath();
    context.strokeStyle = '#fff';

    for (var x = 0; x < canvasWidth; x += colInc) {
      context.moveTo(x, 0);
      context.lineTo(x, canvasHeight);
    }

    for (var y = 0; y < canvasHeight; y += rowInc) {
      context.moveTo(0, y);
      context.lineTo(canvasWidth, y);
    }

    context.stroke();
  };

  function eventLoop() {
    world.draw(context);
    drawGrid();
    world.update();
  };
  setInterval(eventLoop, 2000);
}(world))
</script>
</html>
